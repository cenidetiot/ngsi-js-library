# JSON Parser Functions
The ngsi-parser module provides functions to analyze the context entities generated by the context producers. The charge of perform this analysis is the JSON Parser component. This component analyzes the content of the JSON entity provided by the context producer, and producing as an output the entity converted in NGSI format. The JSON Parser can carry out the analysis of completes context entities, entity attributes or attributes values and convert them to objects of format NGSI.

* [Parsing an Attribute Value](#parse-a-value)
* [Parsing an Attribute](#parse-an-attribute)
* [Parsing an Entity](#parse-an-entity)

### Parsing an Attribute Value
When you want to parse an attribute value to the format NGSI, you can use the parseValue() function. This function receives as a parameter the value of the attribute, the data type of this attribute value must be a data type supported by the ngsi-parser module (described in the section [Data types supported](../index.md#data-types-supported)).
Example:
```js
	var value = ngsi.parseValue(50)
```
Output:
```json
	{
		"value": 50,
		"type": "Number",
		"metadata": {}
	}
```
### Parsing an Attribute
An attribute NGSI of a context entity can include metadata or not. These metadata describe additional characteristics of the attribute. Next sections present two situations for parsing and converting the JSON attributes to NGSI attributes.

#### Attribute without metadata 
When you want convert an attribute without metadata to a NGSI attribute, you must specify as parameter in the parseAttrs() function, the JSON of the attribute. This JSON attribute must be composed by the name and value of the attribute. In the next example are shown the attribute temperature with value of 50.
Example:
``` js
    var attribute = ngsi.parseAttrs({
        temperature : 50
    })
```
Output
``` json
{     
 "temperature":{
    "value":50,
    "type":"Number",
    }
}
```
#### Attribute with metadata 
When you want convert an attribute with metadata to a NGSI attribute, you must specify as parameter in the parseAttrs() function, the JSON of the attribute including the attribute value and its metadata. For example, in the following code fragment is shown the attribute **temperature** with value of **50**, and as metadata of this attribute, the attributes **frequency** with value of **50** and the attribute **scale** with value **Fahrenheit**
Example
```js
	var attribute = ngsi.parseAttrs({
		temperature : {
			value : 50,
			metadata :{
				frecuency : 50,
				scale: 'Fahrenheit'
			}
		}
	})
```
The parseAttrs() function produces as output the attribute and its metadata converted to the NGSI format.
Output
```json
	{
		"temperature":{
			"value":50,
			"type":"Number",
			"metadata":{
				"frecuency":{
					"value":50,
					"type":"Number"
				},
				"scale":{
					"value":"Fahrenheit",
					"type":"Text"
				}
			}
		}
	}

```
### Parse an Entity
The ngsi-parser module also allows to analyze completes entities besides to attributes or attributes values. To parse an complete context entity is used the parseEntity() function, which one receives as a parameter the JSON object non-structured of the context entity, and produces as output this JSON object converted in a NGSI entity. The next example shows the JSON of the entity **Room1** of type **Room**, with its attributes **temperature** and **dateCreated**. 
Example:
```js
	var entity = ngsi.parseEntity({
		id :'Room1',
		type:'Room',
		temperature : {
			value : 50 ,
			metadata : {
				frecuency: 40,
				scale: 'Celsious'
			}
		},
		dateCreated: new Date()
	})
```
The parse Entity() function produces as output the JSON entity converted in a NGSI entity.
Output
```json
	{
		"id":"Room1",
		"type":"Room",
		"temperature":{
			"value":50,
			"type":"Number",
			"metadata":{
				"frecuency":{
					"value":40,
					"type":"Number"
				},
				"scale":{
					"value":"Celsious",
					"type":"Text"
				}
			}
		},
		"dateCreated":{
			"value":"2017-10-08T04:01:19.560Z",
			"type":"DateTime",
			"metadata":{}
		}
	}

```


